<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Hospital_Selection</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    {% include "main_app/header.html" %}
    {% include 'main_app/common_css.html' %}
    <!--<link rel="stylesheet" href="{% static 'Hospital_Selection.css' %}">-->
    <script>
        $(document).ready(function(){
        $("#countries").on("change",function(){
        var country=$("#countries").val();
        if(country=="Select")
             alert("Select Appropriate Country");
        $.ajax(
        {
             type:"get",
             url:"/Hospital_Selection/states/",
             data:
             {
              country:$("#countries").val()
             },
             success:function(data)
             {
             var states=JSON.stringify(data);
             var p=states.split(",");

             $("#states").empty();
             $("#states").append(`<option value="Select">
                                       Select State
                                  </option>`);

             for(var i=0;i<p.length;i++)
             {
             var optionText=p[i].replace("\"","");
                $("#states").append(`<option value="${optionText}">
                                       ${optionText}
                                  </option>`);
             }
             }
        });
        });
        $("#states").on("change",function(){
        var state=$("#states").val();
         if(state=="Select")
             alert("Select Appropriate State");
        $.ajax(
        {
             type:"get",
             url:"/Hospital_Selection/city/",
             data:
             {
              city:$("#states").val()
             },
             success:function(data)
             {
             var states=JSON.stringify(data);
             var p=states.split(",");

             $("#cities").empty();
             $("#cities").append(`<option value="Select">
                                       Select City
                                  </option>`);

             for(var i=0;i<p.length;i++)
             {
             var k=p[i].replace("\[","")
             var n=k.replace("\]","")
             var optionText=n.slice(1,n.length-1)

                $("#cities").append(`<option value="${optionText}">
                                       ${optionText}
                                  </option>`);
             }
             }
        });
        });
        $("#form1").on("submit",function()
        {
         var state=$("#states").val();
         var city=$("#cities").val();
         var country=$("#countries").val();
         if(state=="Select" || city=="Select" || country=="Select")
             alert("Select Appropriate values from dropdowns");
        });
        });
    </script>
    <style>
        @media only screen and (max-width: 720px) {
        *
        {
        font-size:10px;
        }
        select
        {
           width:80px !important;
        }
        button
        {
          font-size:11px !important;
        }
        #countries
        {
         margin-left:50px !important;
            width:80px;
            height:30px;
            border-radius:1px;
            font-size:12px;
        }
        #label1
        {
           margin-left:50px !important;
        }
        #label2
        {
           margin-left:50px !important;
        }
        #states
        {
            margin-left:0px;
            width:80px;
            height:30px;
            border-radius:1px;
            font-size:12px;
        }
        #sort
        {
             width:100px !important;
            height:30px;
            border-radius:1px;
            font-size:12px;
        }
        b
        {
          font-size:15px !important;
        }
         #filters
         {
         width:100px !important;
            height:30px;
            border-radius:1px;
            font-size:12px;
         }
        #cities
        {
        margin-left:0px;
            width:80px;
            height:30px;
            border-radius:1px;
            font-size:12px;

        }
    #submit_form
        {
            font-size:10px !important;
            width:60px !important;
            height:30px !important;
            margin-top:-28px !important;
            margin-left:10px !important;

        }
    #div_form
        {
           position:absolute;
           margin-top:-250px;
           margin-left:30px;
        }
    .img1
    {
     height:150px !important;
    }
    .row
    {
    margin-left:5px;
    }
    .btn
    {
      font-size:10px;
     }
    .card
    {
       margin-left:0px;
       width:300px;
    }
     th,td
     {
        font-size:10px;
     }
     }
     .img1
     {
        height:250px !important;
        }
     select
     {
     width:200px;
     height:30px;
     }
     b
     {
       font-size:20px;
     }
     .form_select
        {
            width:150px;
            border-radius:3px;
            margin-left:100px;
            height:40px;
        }
        input[type="text"]
        {
          width:200px;
          height:30px;
        }
        .mode
        {
          font-size:15px;
          margin-left:2px;
        }
        #div_form
        {
           position:absolute;
           margin-top:-250px;
           margin-left:100px;
        }

        #submit_form
        {
        font-size:15px;
        width:100px;
        height:40px;
        margin-top:-8px;
        margin-left:90px;
        }

    </style>
    <script src="{% static 'Hospital_Selection.js' %}"></script>
    <script>
        $(document).ready(function(){
        $(".mode").on("click",function(){
        var id1=$(this).attr('id');
        //alert(id1)
        $("#mode").val(id1);
        });
        });
        </script>
    <script>
        function validate()
        {
        var date=document.getElementById("Appointment_Date").value;
        alert(date);
        var d=new Date();
        var d1=new Date(date);
        if(!Date.parse(date)){
            alert('Please Select Appropriate Date');
            return false;
        }
        if(!(d1>d && d1.getDay()!=0 && d1.getDay()!=6))
        { alert('Please Select Appropriate Date');
            return false;
        }
        }
    </script>
    <script>
    $(document).ready(function()
        {
         var filter=$("#filters").val();
         if(filter=="Location")
            {

            $('#filter_type').val(filter);
            $('#form2').css({"display":"none"});
            $("#search_value").empty();
                 $('#form1').css({"display":"block"});
            }
       $("#filters").on("change",function(){
        var filter=$("#filters").val();
        if(filter=="")
             alert("Select Appropriate Filter");
        else
        {
            if(filter=="Location")
            {
            $('#filter_type').val(filter);
            $('#form2').css({"display":"none"});
            $('#form3').css({"display":"none"});
            $('#form8').css({"display":"none"});
            $("#search_value").empty();
                 $('#form1').css({"display":"block"});
                  $("test_name").css({"display":"none"});
            }
            else if(filter=="Test Name")
            {
               $('#filter_type2').val(filter);
               $('#form1').css({"display":"none"});
               $('#form2').css({"display":"none"});
                $('#label2').html("<b>Select the Test Name:</b>");
                $("#form3").css({"display":"block"});
            }
            else if(filter=="speciality")
            {

              $('#filter_type3').val(filter);
               $('#form1').css({"display":"none"});
               $('#form2').css({"display":"none"});
                $('#label3').html("<b>Select the Speciality Name:</b>");
                $("#form3").css({"display":"none"});
                $("#search_value").empty();
                $("#form8").css({"display":"block"});

            }
            else{
             $("#search_value").empty();
             $('#filter_type1').val(filter);
             var string1='<b> Enter the '+filter+'</b>'
             $('#label1').html(string1)
             $('#form1').css({"display":"none"});
             $('#form3').css({"display":"none"});
             $('#form8').css({"display":"none"});
            $('#form2').css({"display":"block"});
             $("test_name").css({"display":"none"});
            $("#search_value").append(`<input type="text" width="100%"required name="search_values">
                                  </input>`);
                                  }
                                  }
                                  });
                                  });
    </script>
    <script>
    $(document).ready(function()
        {
        var filter_value=$(".filter_value").val();
        if(filter_value!=""){
            var str1="#"+filter_value
            $(str1).attr("selected","selected");
            }
       $("#sort").on("change",function(){
        var filter=$("#sort").val();
        $("#search_value").empty();
         $("#form6").submit();
                                  });
                                  });
    </script>
</head>
<body style="background-image:url({% static 'image3.jpeg' %}); width:100%;" >
<div>
        <span>
            <label for="filters"><b style="font-size:20px;">Filter By:</b></label></span>
        <span>
                <select id="filters"  name="filter"  required>
                    <option value="Location" selected>Location</option>
                    <option value="Hospital_Name" >Hospital_Name</option>
                    <option value="Doctor_Name">Doctor Name</option>
                    <option value="Clinic_Name">Clinic Name</option>
                    <option value="speciality">Speciality</option>
                    <option value="Testing_Lab">Testing Lab Name</option>
                    <option value="Test Name">Test Name</option>
                </select>
    </span>
    <span style="float:right;">
            <form action="{% url 'list_of_hospital' %}" id="form6"  style="display:block;" method="post">
              {% csrf_token %}
                {% if filter %}
                <input type="text" hidden class="filter_value" class="form-control" value="{{ filter }}">
                {% else %}
                 <input type="text" hidden class="filter_value" value="">
                {% endif %}
                <select id="sort"  name="filter" required >
                    <option value="Hospitals" id="Hospitals">Hospitals</option>
                    <option value="Clinics" id="Clinics">Clinics</option>
                    <option value="Testing_Labs" id="Testing_Labs">Testing Labs</option>
                </select>
            </form>
    </span>
    <span style="float:right;">
            <label for="sort"><b style="font-size:20px;">Group By:</b></label></span>
    </div>
   <div style="margin-top:50px;">
        <form action="{% url 'list_of_hospital' %}" id="form1" style="display:block;" method="post">
            {% csrf_token %}
            {% if list_of_countries|length > 0 %}
                <span>
             <input type="text" hidden id="filter_type" name="filter"></span>
                <span>
                <select id="countries" style="margin-left:300px;">
                 <option value="Select">Select Country</option>
                {% for i in list_of_countries %}
                        <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
                </select></span>
            {% endif %}
                <span>
                <select id="states" >
                        <option value="Select">Select State</option>
                </select></span>
                <span>
                <select id="cities">
                    <option value="Select">Select City</option>
                </select></span>
                <span>
                <button type="submit" class="btn-success" id="submit_form"> Submit</button></span>
            </form>
        <form  action="{% url 'list_of_hospital' %}" id="form2" style="display:none" method="post">
                {% csrf_token %}
                <span>
                 <input type="text" hidden id="filter_type1" name="filter"></span>
                <span  id="label1" style="margin-left:300px;">
                </span>
                <span  id="search_value" >

                    </span>
                <span>
                <button type="submit"  value="submit" class=" btn btn-success">Submit</button></span>
                 </form>
       <form  action="{% url 'list_of_hospital' %}" id="form3" style="display:none" method="post">
                {% csrf_token %}
                <span>
                 <input type="text" hidden id="filter_type2" name="filter"></span>
                <span  id="label2" style="margin-left:300px;">
                </span>
                {% if list_of_tests %}
                <span>
                <select id="test_names"  name="Test_Name" >
                {% for i in list_of_tests %}
                        <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
                </select></span>
                {% endif %}
                <span>
                <button type="submit"  value="submit" class=" btn btn-success">Submit</button></span>
                 </form>
       <form  action="{% url 'list_of_hospital' %}" id="form8" style="display:none" method="post">
                {% csrf_token %}
                <span>
                 <input type="text" hidden id="filter_type3" name="filter"></span>
                <span  id="label3" style="margin-left:300px;">
                </span>
                {% if list_of_speciality %}
                <span>
                <select id="speciality"  name="speciality" >
                {% for i in list_of_speciality %}
                        <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
                </select></span>
                {% endif %}
                <span>
                <button type="submit"  value="submit" class=" btn btn-success">Submit</button></span>
                 </form>
   </div>

       <div class="container-fluid">
    {% if list_of_hospitals|length > 0 %}
<div class="row" style="margin-top:50px;">
    {% for i in list_of_hospitals %}
    <div class="col-lg-3 col-xs-1 " style="margin-top:10px;">
        <div class="card">
            <image src="{{ i.pic1.url }}" height=100px  class="img1" alt="{{ i.hospitalid.name }}"></image>
            <table class="table-stripped">
                <tr>
                    <th>Name:</th>
                    <td>{{ i.hospitalid.name }}</td>
                </tr>
                <tr>
                    <th>City:</th>
                    <td>{{ i.city }}</td>

                </tr>
            </table>
            <button class="btn btn-primary" onclick="location.href='{% url 'Selected' user_id=i.hospitalid  %}'">Apply Now</button>
        </div>
    </div>
    {% endfor %}
        </div>

    {% else %}
    <div>
        <center>
             {% ifequal filter "Hospital" %}
                No Hospitals Registered In this Area
            {% endifequal %}
        </center>
    </div>
    {% endif %}
    </div>

<div class="container-fluid">
    {% if list_of_doctors|length > 0 %}
<div class="row" style="margin-top:50px;">
    {% for i in list_of_doctors %}
    <div class="col-lg-4 col-xs-4" style="margin-top:10px;">
        <div class="card">
            {% ifequal filter "Clinics" %}
            <image src="{{ i.clinic_photo.url }}" height=100px class="img1" alt="{{ i.hospitalid.name }}"></image>
            {% else %}
            <image src="{{ i.profile_pic.url }}" height=100px class="img1" alt="{{ i.hospitalid.name }}"></image>
            {% endifequal %}
            <table class="table-stripped">
                <tr>
                    {% ifequal filter "Clinics" %}
                    <th>Clinic Name:</th>
                    <td>{{ i.clinic_name }}</td>
                    {% else %}
                    <th>Hospital Name:</th>
                    <td>{{ i.hospitalid.hospitalid.name }}</td>
                    {% endifequal %}
                </tr>
                <tr>
                    <th>Name:</th>
                    <td>{{ i.doctorid.name }}</td>
                </tr>
                <tr>
                    <th>City:</th>
                    <td>{{ i.city }}</td>
                </tr>
                <tr>
                    <th>Specialisation:</th>
                    <td>{{ i.specialization }}</td>

                </tr>
                <tr>
                    <th>fee:</th>
                    <td>{{ i.specialization }}</td>
                </tr>
                <tr>
                    <td><button class="btn btn-primary mode" id="Online"   data-toggle="modal" data-target="#exampleModal">Book Online Consultation</button></td>
                <td><button class="btn btn-primary mode"  id="Remote"   data-toggle="modal" data-target="#exampleModal">Book Offline Appointment</button></td>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Choose Date</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <form role="form" action="{% url 'Appointment_Details_Submission1' %}"   onsubmit="return validate()" id="form4" method="post">
                        {% csrf_token %}
      <div class="modal-body">

                        <input type="text" hidden value="{{ i.doctorid }}" name="doctorid">
                        <input type="text" hidden value="" name="mode" id="mode">
                <input type="date" name="date" id="Appointment_Date">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Book Appointment</button>
      </div>
        </form>
    </div>
  </div>
</div>
                        </tr>
            </table>
            </div>
    </div>
    {% endfor %}
        </div>
    {% endif %}
    </div>
<div class="container-fluid">
    {% if list_of_testing_labs|length > 0 %}
<div class="row" style="margin-top:50px;">
    {% for i in list_of_testing_labs %}
    <div class="col-lg-3 col-xs-1" style="margin-top:10px;">
        <div class="card">
            <image src="{{ i.profile_pic.url }}" height=250px class="img1" alt="{{ i.tlabid.name }}"></image>
            <table class="table-stripped">
                <tr>
                    <th>Testing Lab Name:</th>
                    <td>{{ i.tlabid.name }}</td>
                </tr>
                <tr>
                    <th>City:</th>
                    <td>{{ i.city }}</td>
                </tr>
            </table>
             <button class="btn btn-primary" onclick="location.href='{% url 'Selected' user_id=i.tlabid  %}'">Apply Now</button>

        </div>
    </div>
    {% endfor %}
    </div>
    {% endif %}
</div>
 {% include 'main_app/show_messages.html' %}
</body>
</html>














