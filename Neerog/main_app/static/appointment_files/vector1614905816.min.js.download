var Tooltip=function(pos_left,pos_top,message){var container,INSTANCE=new VSModule,PADDING_TOP=13;return INSTANCE.remove=function(){container.addClass("conceal"),setTimeout(function(){container.remove()},500)},container=$('<div id="vs_tooltip" />').css({left:pos_left,top:pos_top+PADDING_TOP}).appendTo("body"),$("<p />").html(message).appendTo(container),$('<span class="tail" />').appendTo(container),Tooltip.current&&Tooltip.current.remove(),setTimeout(function(){Tooltip.current=INSTANCE,container.addClass("reveal")}),INSTANCE};Tooltip.galleries=null,VectorStock.LazyImage=function(container){var INSTANCE=new VSModule,windowframe=$(window);function checkVisibility(){if(!container.is(":hidden")){var frame_top=windowframe.scrollTop(),frame_bottom=frame_top+windowframe.height(),item_top=container.offset().top;item_top+container.height()>=frame_top-VectorStock.LazyImage.SCROLL_MARGIN&&item_top<=frame_bottom+VectorStock.LazyImage.SCROLL_MARGIN&&(loadImage(),windowframe.off("scroll resize",checkVisibility))}}function loadImage(){var icon=INSTANCE.anchor.loadingIcon(),img=new Image;img.onload=function(){$(img).appendTo(INSTANCE.anchor),setTimeout(function(){container.addClass("reveal"),icon.remove(),INSTANCE.dispatchEvent("loaded",[INSTANCE.id])},10)},img.onerror=function(){container.addClass("error"),icon.remove(),$('<span class="icon">!</span>').appendTo(INSTANCE.anchor),INSTANCE.dispatchEvent("error")},img.src=INSTANCE.src}return INSTANCE.anchor=$("a",container),INSTANCE.src=container.data("src"),INSTANCE.id=(INSTANCE.src.match(/(\d+)\.(jpe?g|png)$/)||[null,null])[1],VectorStock.LazyImage.observer_load?(container.bind("loadImage",loadImage),VectorStock.LazyImage.observer_load.observe(container[0])):(windowframe.on("scroll resize",checkVisibility),checkVisibility()),INSTANCE},VectorStock.LazyImage.SCROLL_MARGIN=500,window.IntersectionObserver&&(VectorStock.LazyImage.observer_load=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){entry.isIntersecting&&($(entry.target).trigger("loadImage"),observer.unobserve(entry.target))})},{root:null,rootMargin:VectorStock.LazyImage.SCROLL_MARGIN+"px",threshold:0}));var VectorAttributionPopupCopyfield=function(fieldset){var input,button,INSTANCE=new VSModule;function highlightInput(){fieldset.addClass("highlight")}function unhighlightInput(){fieldset.removeClass("highlight")}function onURLCopied(){INSTANCE.dispatchEvent("copy",[input.val()])}function copyURLToClipboard(){try{input.select(),document.execCommand("copy")||copyURLToClipboardBackup()}catch(err){copyURLToClipboardBackup()}}function copyURLToClipboardBackup(){onURLCopied(),window.prompt("Copy failed - try copying here instead:",input.val())}return support_copy=!1,INSTANCE.setValue=function(value){input.val(value)},INSTANCE.select=function(){input.select()},function(){input=$("input",fieldset),button=$("button",fieldset);try{support_copy=document.queryCommandSupported("copy"),button.on("mousedown",highlightInput).on("mouseup mouseleave",unhighlightInput).on("click",copyURLToClipboard)}catch(e){fieldset.addClass("fallback")}input.on("copy",onURLCopied)}(),INSTANCE},VectorAttributionPopup=function(vector_id,vector_title,vector_url,vector_artist){var overlay,container,tab_list,tab_content,but_download,but_download_title,INSTANCE=new VSModule,HTML_TEMPLATE='<div id="box-affiliate"><div class="wrapper"><header><h1>Vector Attribution</h1><h2>This vector is <strong>FREE</strong> to use if you attribute the artist with the links below. <a href="/faq/members/free-vector-attribution" target="_blank">Learn more...</a></h2></header><section><nav><ul><li data-tab-id="web" class="selected">Web &amp; Social</li><li data-tab-id="print">Print</li><li data-tab-id="video">Video</li><li data-tab-id="apps">Apps</li></ul></nav><div class="tab-content"><div class="tab selected" data-tab-id="web"><div class="fieldset"><input type="text"><button type="button">Copy HTML</button></div></div><div class="tab" data-tab-id="print"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div><div class="tab" data-tab-id="video"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div><div class="tab" data-tab-id="apps"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div><figure></figure></div></section><footer><a href=""><span class="title">Download Free Vector</span><span class="subtitle">You must attribute the artist</span></a></footer><button data-action="close" type="button">Close</button></div></div>',tab_selected=null,copyfield_by_id={};function onClickOverlay(event){$(event.target)[0]==overlay[0]&&INSTANCE.close()}function onClickTab(event){var tab=$(event.target),tab_id=tab.data("tab-id");tab_id!==tab_selected&&(tab_list.filter(".selected").removeClass("selected"),tab.addClass("selected"),tab_content.filter(".selected").removeClass("selected"),tab_content.filter('[data-tab-id="'+tab_id+'"]').addClass("selected"),copyfield_by_id[tab_selected=tab_id].select(),INSTANCE.dispatchEvent("select_tab",[tab_id]))}function onClickDownload(event){but_download.hasClass("disabled")||INSTANCE.dispatchEvent("download"),event.preventDefault()}function onKeyPress(event){"Escape"===event.key&&(INSTANCE.close(),event.stopPropagation())}return INSTANCE.setDownloadStatus=function(is_downloading){is_downloading?(but_download.addClass("disabled"),but_download_title.text("Downloading...")):(but_download.removeClass("disabled"),but_download_title.text("Download Free Vector"))},INSTANCE.close=function(){container&&container.remove(),overlay.remove(),$(document).off("keypress",onKeyPress),INSTANCE.dispatchEvent("close")},function(){overlay=$('<div class="overlay" />').css({height:$(document).height()}).appendTo("body").on("click",onClickOverlay),setTimeout(function(){overlay.addClass("reveal")}),container=$(HTML_TEMPLATE).appendTo(overlay);var but_close,image_url=VectorStock.imagePath(vector_id,vector_title,"medium");$("figure",container).append('<img src="'+image_url+'" alt="'+vector_title+'">'),tab_list=$("section nav li",container),tab_content=$("section .tab-content .tab",container),but_download=$("footer a",container),but_download_title=$(".title",but_download),but_close=$('button[data-action="close"]',container),tab_selected=tab_list.filter(".selected").data("tab-id"),tab_content.each(function(){var tab_panel=$(this),tab_id=tab_panel.data("tab-id"),copy_field=new VectorAttributionPopupCopyfield($(".fieldset",tab_panel));"web"==tab_id?copy_field.setValue('<a href="'+vector_url+'">Vector image by VectorStock / '+vector_artist+"</a>"):"print"==tab_id?copy_field.setValue("Designed by "+vector_artist+" (Image #"+vector_id+" at VectorStock.com)"):"video"==tab_id?copy_field.setValue(vector_title+" image designed by "+vector_artist+" at VectorStock.com"):"apps"==tab_id&&copy_field.setValue("Designed by "+vector_artist+" (Image #"+vector_id+" at VectorStock.com)"),copy_field.on("copy",function(url){INSTANCE.dispatchEvent("copy_url",[url])}),copyfield_by_id[tab_id]=copy_field}),but_download.attr("href",vector_url),tab_list.on("click",onClickTab),but_download.on("click",onClickDownload),but_close.on("click",INSTANCE.close),$(document).on("keypress",onKeyPress),setTimeout(function(){container.addClass("reveal")}),setTimeout(function(){copyfield_by_id[tab_selected].select()},250)}(),INSTANCE},VectorAttributionOverlay=function(target,vector_id,vector_title,vector_url,vector_artist){var container,tab_list,tab_content,but_close,INSTANCE=new VSModule,HTML_TEMPLATE='<div class="overlay-attribution"><div class="wrapper"><header><img src="https://cdn.vectorstock.com/img/modules/customization-artists.svg" alt="Artist Attribution"><h1>Image downloading... Don’t forget to attribute the&nbsp;artist!</h1></header><section><nav><ul><li data-tab-id="web" class="selected">Web &amp; Social</li><li data-tab-id="print">Print</li><li data-tab-id="video">Video</li><li data-tab-id="apps">Apps</li></ul></nav><div class="tab-content"><div class="tab selected" data-tab-id="web"><div class="fieldset"><input type="text"><button type="button">Copy HTML</button></div></div><div class="tab" data-tab-id="print"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div><div class="tab" data-tab-id="video"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div><div class="tab" data-tab-id="apps"><div class="fieldset"><input type="text"><button type="button">Copy Text</button></div></div></div></section></div><button data-action="close" type="button">Close</button></div>',tab_selected=null,copyfield_by_id={};function onClickTab(event){var tab=$(event.target),tab_id=tab.data("tab-id");tab_id!==tab_selected&&(tab_list.filter(".selected").removeClass("selected"),tab.addClass("selected"),tab_content.filter(".selected").removeClass("selected"),tab_content.filter('[data-tab-id="'+tab_id+'"]').addClass("selected"),copyfield_by_id[tab_selected=tab_id].select())}return INSTANCE.close=function(){target.removeClass("attribution"),container&&container.remove(),INSTANCE.dispatchEvent("close")},container=$(HTML_TEMPLATE).appendTo(target),target.addClass("attribution"),tab_list=$("section nav li",container),tab_content=$("section .tab-content .tab",container),but_close=$('button[data-action="close"]',container),tab_selected=tab_list.filter(".selected").data("tab-id"),tab_content.each(function(){var url_value,tab_panel=$(this),tab_id=tab_panel.data("tab-id"),copy_field=new VectorAttributionPopupCopyfield($(".fieldset",tab_panel));"web"==tab_id?url_value='<a href="'+vector_url+'">'+vector_title+" vector by "+vector_artist+"</a>":"print"==tab_id?url_value="Designed by "+vector_artist+" (Image #"+vector_id+" at VectorStock.com)":"video"==tab_id?url_value=vector_title+" image designed by "+vector_artist+" at VectorStock.com":"apps"==tab_id&&(url_value="Designed by "+vector_artist+" (Image #"+vector_id+" at VectorStock.com)"),copy_field.setValue(url_value),copy_field.on("copy",function(){VectorStock.log({source:"Attribution Popup",event:"Copy URL",detail:{source:"Overlay",vector:vector_id,url:url_value}},"info")}),copyfield_by_id[tab_id]=copy_field}),tab_list.on("click",onClickTab),but_close.on("click",function(){setTimeout(INSTANCE.close,20)}),container.on("click",function(event){event.stopPropagation()}),setTimeout(function(){copyfield_by_id[tab_selected].select()},250),INSTANCE},VectorDropdown=function(container){var display,display_label,select,INSTANCE=new VSModule;function onChange(){var opt_selected=$("option:selected",select),value=(opt_selected.closest("optgroup"),select.val()),label=opt_selected.data("label");opt_selected.data("details")&&(label+=" ("+opt_selected.data("details")+")"),display_label.html(label),container.attr("data-value",value),INSTANCE.value=value,INSTANCE.dispatchEvent("change",[value])}return INSTANCE.value=null,INSTANCE.select=function(value){var option=$('option[value="'+value+'"]');option.length&&!option.is(":selected")&&(select.val(value),onChange())},display=$("> .display",container),display_label=$(".label",display),select=$("> .select select",container),$("option",select),INSTANCE.value=select.val(),select.on("change",onChange),INSTANCE},VectorOptions=function(container,vector_details,account_details){var area_options,area_license,opts_license,area_attribution,but_attribution,area_payment_standard,area_payment_editorial,area_payment_expanded,opts_payment_standard,opts_payment_editorial,opts_payment_expanded,area_customization,field_customization,opts_customization,area_download,help_download,but_download,but_download_icon,but_download_label,INSTANCE=new VSModule;INSTANCE.license=null,INSTANCE.payment=null,INSTANCE.cost=null,INSTANCE.customization=null;var area_payment={},opts_payment={};area_options=$(".options",container),area_license=$('.option[data-type="license"]',area_options),opts_license=new VectorStock.FieldRadioboxes($(".radgroup label",area_license)),area_attribution=$('.option[data-type="attribution"]',area_options),but_attribution=$('button[data-action="popup"]',area_attribution),area_payment_standard=$('.option[data-type="payment"][data-license="standard"]',area_options),area_payment_editorial=$('.option[data-type="payment"][data-license="editorial"]',area_options),area_payment_expanded=$('.option[data-type="payment"][data-license="expanded"]',area_options),area_payment_standard.length&&(opts_payment_standard=new VectorStock.FieldRadioboxes($('.radgroup[data-license="standard"] label',area_payment_standard))),area_payment_editorial.length&&(opts_payment_editorial=new VectorStock.FieldRadioboxes($('.radgroup[data-license="editorial"] label',area_payment_editorial))),area_payment_expanded.length&&(opts_payment_expanded=new VectorStock.FieldRadioboxes($('.radgroup[data-license="expanded"] label',area_payment_expanded))),area_customization=$('.option[data-type="customization"]',area_options),field_customization=$("fieldset",area_customization),opts_customization=new VectorStock.FieldCheckbox($("#f_payment_customization",field_customization)),area_download=$(".download",container),help_download=$("h6 .label",area_download),but_download=$('button[data-action="download"]',area_download),but_download_icon=$(".icon",but_download),but_download_label=$(".label",but_download),area_payment[VectorOptions.LICENSE_STANDARD]=area_payment_standard,area_payment[VectorOptions.LICENSE_EDITORIAL]=area_payment_editorial,area_payment[VectorOptions.LICENSE_EXPANDED]=area_payment_expanded,opts_payment[VectorOptions.LICENSE_STANDARD]=opts_payment_standard,opts_payment[VectorOptions.LICENSE_EDITORIAL]=opts_payment_editorial,opts_payment[VectorOptions.LICENSE_EXPANDED]=opts_payment_expanded;var but_download_label_copy,loaded_filesize=!1;function showTooltip(){if(!VectorStock.isMobile()){var scope=$(this).closest(".option, .download").addClass("hover"),help=$(".help",scope).show();function hideTooltip(){scope.removeClass("hover"),help.removeClass("reveal").hide(),$(this).off("mouseout",hideTooltip),$("body").off("click",hideTooltip)}setTimeout(function(){help.addClass("reveal")},25),$(this).on("mouseout",hideTooltip),scope.hasClass("option")&&$("body").on("click",hideTooltip)}}function onHoverFileSizes(){var FILETYPES=["ai","eps","pdf","jpg","png","cdr","zip"];if(!loaded_filesize){var scope=$(".help",area_download),loading=$(".loading",scope);loading.loadingIcon("small"),$.get("/api/filesizes/"+vector_details.id,function(response){if(response.success){for(var table=$("<table><thead><tr><th>File Type</th><th>Size</th></tr></thead><tbody></tbody></table>"),tbody=$("tbody",table),i=0;i<FILETYPES.length;i++)if(null!==response[FILETYPES[i]+"_bytes"]){var file_label=FILETYPES[i].toUpperCase(),file_size=response[FILETYPES[i]+"_bytes"],file_desc="",file_width=response[FILETYPES[i]+"_width"],file_height=response[FILETYPES[i]+"_height"];file_width&&file_height&&(file_label+=" <small>("+file_width+"px by "+file_height+"px)</small>"),file_desc=1e6<file_size?(file_size/1e6).toFixed(2)+" <small>MB</small>":Math.round(file_size/1e3)+" <small>KB</small>",$('<tr class="'+FILETYPES[i]+'"><td colspan="2"><span class="row"><span class="dt">'+file_label+'</span><span class="dm"></span><span class="dd">'+file_desc+"</span></span></td></tr>").appendTo(tbody)}loading.remove(),table.appendTo(scope)}}),loaded_filesize=!0}showTooltip.call(this)}function onLicenseChange(){var license=opts_license.value;container.attr("data-license",license),area_license.attr("data-license",license);var label=(INSTANCE.license=license)===VectorOptions.LICENSE_FREE?VectorOptions.BUTTON_LABEL_FREE:VectorOptions.BUTTON_LABEL_DOWNLOAD;but_download_label.html(label),onPaymentChange(),INSTANCE.dispatchEvent("change_license",[INSTANCE.license])}function onPaymentChange(){var payment=opts_payment[INSTANCE.license]?opts_payment[INSTANCE.license].value:null;container.attr("data-payment",payment),opts_payment_expanded&&(INSTANCE.license==VectorOptions.LICENSE_STANDARD?opts_payment_expanded.set(opts_payment_standard.value,!0):INSTANCE.license==VectorOptions.LICENSE_EXPANDED&&opts_payment_standard.set(opts_payment_expanded.value,!0)),INSTANCE.payment=payment,INSTANCE.cost=opts_payment[INSTANCE.license]?opts_payment[INSTANCE.license].selected.data("cost"):null,INSTANCE.dispatchEvent("change_payment",[INSTANCE.payment])}function attemptDownload(){function announceDownloadEvent(){INSTANCE.dispatchEvent("download",[INSTANCE.license,INSTANCE.payment,INSTANCE.cost,INSTANCE.customization])}var alt_subscription=!1;if(alt_credits=!1,INSTANCE.payment===VectorOptions.PAYMENT_SINGLEIMAGE&&null===INSTANCE.customization&&(account_details.downloads&&0<=account_details.downloads&&(INSTANCE.license===VectorOptions.LICENSE_STANDARD||INSTANCE.license===VectorOptions.LICENSE_EDITORIAL)&&(alt_subscription=!0),account_details.credits&&account_details.credits>=INSTANCE.cost&&(alt_credits=!0)),alt_subscription||alt_credits){area_download.addClass("prompted");var prompt=$('<div class="prompt"><p>Are you sure you&rsquo;d like to purchase this license using Pay-per-Image?</p></div>').appendTo(area_download),buttons=$('<div class="buttons" />');function removePrompt(){area_download.removeClass("prompted"),prompt.remove()}$('<button type="button">Buy with Pay-per-Image</button>').appendTo(buttons).on("click",function(){removePrompt(),announceDownloadEvent()}),alt_subscription?($("<p>You could buy with your Subscription instead (you have "+account_details.downloads+" remaining)&hellip;</p>").appendTo(prompt),$('<button type="button">Use Subscription instead</button>').appendTo(buttons).on("click",function(){opts_payment[INSTANCE.license].set("subscription"),removePrompt(),announceDownloadEvent()})):alt_credits&&($("<p>You could buy with your Credits instead (you have "+account_details.credits+" remaining)&hellip;</p>").appendTo(prompt),$('<button type="button">Use Credits instead</button>').appendTo(buttons).on("click",function(){opts_payment[INSTANCE.license].set("credits"),removePrompt(),announceDownloadEvent()})),buttons.appendTo(prompt),setTimeout(function(){prompt.addClass("reveal")},25)}else announceDownloadEvent()}return INSTANCE.disableButton=function(label){but_download.prop("disabled",!0),but_download_icon.loadingIcon(),but_download_label_copy=but_download_label.html(),but_download_label.html(label)},INSTANCE.enableButton=function(){but_download.prop("disabled",!1),but_download_icon.empty(),but_download_label.html(but_download_label_copy)},INSTANCE.triggerDownload=function(){area_download.addClass("downloading"),setTimeout(function(){area_download.removeClass("downloading")},850)},INSTANCE.empty=function(){area_options.remove(),area_download.remove()},INSTANCE.license=opts_license.value,INSTANCE.payment=opts_payment[INSTANCE.license]?opts_payment[INSTANCE.license].value:null,INSTANCE.cost=opts_payment[INSTANCE.license]?opts_payment[INSTANCE.license].selected.data("cost"):null,INSTANCE.customization=opts_customization.checked?parseInt(opts_customization.input.data("cost"),10):null,container.attr("data-license")!==opts_license.value&&onLicenseChange(),container.on("mouseover",".option h6 a",showTooltip),opts_license.on("change",onLicenseChange),opts_payment_standard&&opts_payment_standard.on("change",onPaymentChange),opts_payment_editorial&&opts_payment_editorial.on("change",onPaymentChange),opts_payment_expanded&&opts_payment_expanded.on("change",onPaymentChange),opts_customization&&opts_customization.on("change",function(){INSTANCE.customization=opts_customization.checked?parseInt(opts_customization.input.data("cost"),10):null}),but_attribution.on("click",function(){INSTANCE.dispatchEvent("attribution_popup")}),help_download.on("mouseover",onHoverFileSizes),but_download.on("click",attemptDownload),INSTANCE};VectorOptions.LICENSE_FREE="free",VectorOptions.LICENSE_STANDARD="standard",VectorOptions.LICENSE_EDITORIAL="editorial",VectorOptions.LICENSE_EXPANDED="expanded",VectorOptions.PAYMENT_SINGLEIMAGE="single-image",VectorOptions.PAYMENT_CREDITS="credits",VectorOptions.PAYMENT_SUBSCRIPTION="subscription",VectorOptions.BUTTON_LABEL_FREE="Free Download",VectorOptions.BUTTON_LABEL_DOWNLOAD="Download Image";var VectorImage=function(container,vector_details,account_details){var icon,img,INSTANCE=new VSModule,img_high=$(".highres",container),img_low=$(".lowres",container),area_panels=$(".panels",container),but_pinterest=$(".pinterest button",area_panels),but_facebook=$(".facebook button",area_panels),but_twitter=$(".twitter button",area_panels),but_email=$(".email button",area_panels),but_composite=$('.composite button[data-action="download"]',area_panels),img_path=vector_details.url.replace(/https?:\/\/[^\/]+/i,""),src_high=img_high.data("src");function onClickImage(event){area_panels.length&&event.target!==area_panels[0]||INSTANCE.dispatchEvent("click")}function popupWindow(url,name,width,height){name=name||"",width=width||400,height=height||300;var left,top,win_left=window.screenX||window.screenLeft,win_top=window.screenY||window.screenTop,win_width=window.outerWidth||document.documentElement.clientWidth,win_height=window.outerHeight||document.documentElement.clientHeight-22;left=Math.round(win_left+(win_width-width)/2),top=Math.round(win_top+(win_height-height)/2.5);var win_popup=window.open(url,name,"scrollbars=no,menubar=no,resizable=yes,toolbar=no,location=no,status=yes,left="+left+",top="+top+",width="+width+",height="+height);return win_popup&&win_popup.focus&&win_popup.focus(),win_popup}function shareOnPinterest(){var url_share=vector_details.url+"?utm_source=Pinterest";url_share+="&utm_medium=VectorStock Social Share",url_share+="&utm_campaign=Vector Social Share",url_share+="&utm_content="+vector_details.title;var url_pinterest="https://www.pinterest.com/pin/create/button/?";url_pinterest+="media="+encodeURIComponent(vector_details.media),url_pinterest+="&description="+encodeURIComponent(vector_details.description),url_pinterest+="&url="+encodeURIComponent(url_share),VectorStock.track("send","event","Share","Pinterest",img_path),popupWindow(url_pinterest,"SharePinterest",766,703)}function shareOnFacebook(){var url_share=vector_details.url+"?utm_source=Facebook";url_share+="&utm_medium=VectorStock Social Share",url_share+="&utm_campaign=Vector Social Share",url_share+="&utm_content="+vector_details.title;var url_facebook="https://www.facebook.com/dialog/share?";url_facebook+="app_id=241100862642313",url_facebook+="&display=popup",url_facebook+="&href="+encodeURIComponent(vector_details.url),url_facebook+="&redirect_uri="+encodeURIComponent(url_share),VectorStock.track("send","event","Share","Facebook",img_path),popupWindow(url_facebook,"ShareFacebook",555,469)}function shareOnTwitter(){var url_twitter="https://twitter.com/intent/tweet?";url_twitter+="text="+encodeURIComponent(vector_details.title),url_twitter+="&url="+encodeURIComponent(vector_details.url),VectorStock.track("send","event","Share","Twitter",img_path),popupWindow(url_twitter,"ShareTwitter",550,300)}function shareWithEmail(){VectorStock.track("send","event","Share","Email",img_path),window.location="mailto:?body="+encodeURIComponent(vector_details.url)}function downloadComposite(){INSTANCE.dispatchEvent("download_composite");var params=src_high.match(/\/i\/([a-z0-9\-]+)\/([0-9]+)\/([0-9]+)\/([a-z0-9\-]+)-([0-9]+)\.jpg/i);window.location=VectorStock.getCDNHost(params[5])+"/images/"+params[1]+"/"+params[2]+"/"+params[3]+"/"+params[5]+".jpg?download=1"}return icon=container.loadingIcon("large"),(img=new Image).onload=function(event){$(img).appendTo(img_high),setTimeout(function(){container.addClass("reveal"),icon.remove()},10)},img.onerror=function(event){$("<div><p>High-res image couldn’t load</p></div>").appendTo(img_low),icon.remove(),setTimeout(function(){container.addClass("error")},10)},img.src=src_high,container.on("click",onClickImage),but_pinterest.on("click",shareOnPinterest),but_facebook.on("click",shareOnFacebook),but_twitter.on("click",shareOnTwitter),but_email.on("click",shareWithEmail),but_composite.on("click",downloadComposite),INSTANCE},VectorPurchasedOptions=function(parent,vector,account,customizations,cloud_options){var container,dd_filetype,but_download,list_license,list_customize,but_googledrive,but_dropbox,opt_cloud,payment_type,INSTANCE=new VSModule,HTML_TEMPLATE='<div id="purchased-options"><div class="filedownload"><h6><span class="label">Download Vector as:</span></h6><div class="dropdown" data-value="zip"><div class="display"><span class="label">ZIP Archive</span><span class="icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><path d="M10.6,12.8 15,17.2 19.4,12.8"></path></svg></span></div><div class="select"><select><optgroup label="All Files"><option value="zip" data-label="ZIP Archive">ZIP Archive</option></optgroup><optgroup label="Image"><option value="jpg" data-label="High-res JPG (300 DPI+)">High-res JPG (300 DPI+)</option><option value="png" data-label="High-res PNG (300 DPI+)">High-res PNG (300 DPI+)</option></optgroup><optgroup label="Vector"><option value="ai" data-label="Adobe Illustrator (v10+)">Adobe Illustrator (v10+)</option><option value="eps" data-label="Vector EPS (v8+)">Vector EPS (v8+)</option><option value="pdf" data-label="Vector PDF">Vector PDF</option></optgroup></select></div></div><button type="button" data-action="download"><span class="label">Download ZIP</span><span class="icon"></span></button></div><div class="options"><div class="option" data-type="license"><h6><span class="label">Vector License</span><a href="/faq/members/standard-license" target="_blank">Learn More</a></h6><ul></ul><div class="help"><p>The license type determines how you can use this image.</p><table><thead><tr><th></th><th data-license="standard">Std.</th><th data-license="expanded">Exp.</th></tr></thead><tbody><tr><td>Print / Editorial</td><td data-license="standard"><span class="yes"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Graphic Design</td><td data-license="standard"><span class="yes"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Web Design</td><td data-license="standard"><span class="yes"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Social Media</td><td data-license="standard"><span class="yes"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Edit &amp; Modify</td><td data-license="standard"><span class="yes"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Multi-user</td><td data-license="standard"><span class="no"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Resale Items</td><td data-license="standard"><span class="no"></span></td><td data-license="expanded"><span class="yes"></span></td></tr><tr><td>Unlimited Runs</td><td data-license="standard"><span class="no"></span></td><td data-license="expanded"><span class="yes"></span></td></tr></tbody></table></div></div><div class="option" data-type="customize"><h6><span class="label">Customize<em>New!</em></span><a href="/faq/members/what-is-hire-a-designer" target="_blank">What is this?</a></h6><ul></ul><div class="help"><p>Love the image but just need a few modifications? Let our talented artists do the work for you!</p><p>We&rsquo;ll connect you with a designer who can make updates and send you the artwork in a format of your choice.</p><h4>Examples</h4><ul><li>Change the text</li><li>Modify colors</li><li>Resize to new dimensions</li><li>Include logo or symbol</li><li>Add your company or business name</li></ul></div></div><div class="option" data-type="cloud"><h6><span class="label">Save Vector to:</span></h6><ul><li><button type="button" data-type="googledrive" data-action="connect"><span class="title">Google Drive</span><span class="icon"></span></button></li><li><button type="button" data-type="dropbox" data-action="connect"><span class="title">Dropbox</span><span class="icon"></span></button></li></ul></div><div class="option" data-type="converter"><h6><span class="label">Edit Vector<em>New!</em></span></h6><ul><li><button type="button" data-type="resize"><span class="title">Resize&hellip;</span></button></li><li><button type="button" data-type="export"><span class="title">Export as&hellip;</span></button></li><li><button type="button" data-type="remove"><span class="title">Remove elements&hellip;</span></button></li></ul></div></div></div>',COST_CUSTOMIZATION=85,cloud_buttons={};function updateDownloadButtonLabel(filetype){$(".label",but_download).text("Download "+filetype.toUpperCase())}function createCustomizationItem(customization){var item_customize=$("<li />",list_customize).prependTo(list_customize),but_customize=$('<button type="button" />').appendTo(item_customize),title_customize=$('<span class="title" />').appendTo(but_customize),sub_customize=$('<span class="sub" />').appendTo(but_customize),status_customize=$('<span class="status" data-status="'+customization.status+'" />').appendTo(sub_customize);title_customize.html("Task"+(customization.id?" #"+customization.id:"")),status_customize.html("pending"===customization.status?"Ready!":customization.status),but_customize.on("click",function(){VectorStock.goToURL(customization.url)})}function downloadVector(){var url_download=vector.downloads[dd_filetype.value];if(url_download)VectorStock.goToURL(url_download);else{var event_details={filetype:dd_filetype.value,vector:vector.id};VectorStock.track("send","event","Error (JS)","CustomError: Unable to download filetype",JSON.stringify(event_details),0),alert("Error: Filetype "+dd_filetype.value.toUpperCase()+" does not exist. Please select a different filetype and try again.")}}function upgradeLicense(license){if(payment_type===VectorOptions.PAYMENT_SINGLEIMAGE){var pbox=new PaymentBox({id:vector.id,title:vector.title,license:license.type,cost:license.cost[payment_type],payment:payment_type},{total_cost:license.cost[payment_type],filetype:account.filetype});pbox.on("purchase",function(response){markLicenseAsPurchased(license.type)}),pbox.on("view_options",function(){VectorStock.scrollTo($("#purchased-options"))})}else{var message_license=(license.type[0].match(/[aeiou]/i)?"an ":"a ")+license.type.toTitleCase(),message_cost=license.cost[VectorOptions.PAYMENT_CREDITS];if(confirm("Upgrade to "+message_license+" license for "+message_cost+" Credits?")){var icon_loading,item_license=$('li[data-type="'+license.type+'"]',list_license),but_license=$("button",item_license),sub_license=$(".sub",but_license),sub_contents=sub_license.html();sub_license.empty(),icon_loading=sub_license.loadingIcon("small"),but_license.prop("disabled",!0),INSTANCE.dispatchEvent("license_purchase",[license.type,payment_type,license.cost[VectorOptions.PAYMENT_CREDITS],function(success,response){success?markLicenseAsPurchased(license.type):(but_license.prop("disabled",!1),icon_loading.remove(),sub_license.html(sub_contents))}])}}}function markLicenseAsPurchased(license_type){var item_license=$('li[data-type="'+license_type+'"]',list_license),but_license=$("button",item_license),sub_license=$(".sub",but_license);but_license.prop("disabled",!0),sub_license.html('<span class="status">Purchased</span>')}function buyCustomization(){new PaymentBox({id:vector.id,title:vector.title},{total_cost:COST_CUSTOMIZATION},{cost:COST_CUSTOMIZATION}).on("purchase",function(response){createCustomizationItem({id:response.customization.id,status:response.customization.status,url:response.customization.url})})}function onClickConverterAction(event){var action=$(this).closest("button").data("type");VectorStock.goToURL("/converter-app/"+vector.id+"?action="+action)}function displaySyncError(type,error_message){var listitem=$('button[data-type="'+type+'"]',opt_cloud).parent();listitem.addClass("error"),$('<div class="message">Error: '+error_message+"</div>").appendTo(listitem)}function onClickSyncButton(){var icon_service,sub,icon_loading,button=$(this),listitem=button.parent(),type=button.data("type"),action=button.data("action");function getSyncPermission(){var query_str=$.param({url:window.location.protocol+"//"+window.location.host+window.location.pathname});VectorStock.goToURL("/api/"+type+"/redirect?"+query_str)}listitem.removeClass("error"),button.prop("disabled",!0),icon_service=$(".icon",button).detach(),sub=$('<span class="sub" />').appendTo(button),icon_loading=sub.loadingIcon("small"),$(".message",listitem).remove(),"connect"==action?getSyncPermission():$.get("/api/"+type+"/save/"+vector.id).done(function(response){button.prop("disabled",!1),icon_loading.remove(),1==response.success?(sub.html('<span class="status">Saved!</span>'),button.prop("disabled",!0),VectorStock.track("send","event","Download","Sync ("+type+")","Vector: "+vector.id,0)):"invalid_access_token"===response.error?getSyncPermission():(sub.remove(),icon_service.appendTo(button),displaySyncError(type,response.message||"Unable to connect"),VectorStock.track("send","event","Error (User)","Sync ("+type+")","Vector: "+vector.id,0))}).fail(function(jqxhr,text_status,error){if(button.prop("disabled",!1),icon_loading.remove(),sub.remove(),icon_service.appendTo(button),displaySyncError(type,"Failed to connect"),0==jqxhr.status){var event_details={error:error,status:text_status,vector:vector.id};VectorStock.track("send","event","Error (JS)","CustomError: Sync ("+type+") failed",JSON.stringify(event_details),0)}})}return function(){var opt_license,opt_customize,item_new_task,but_new_task,opt_converter;if(container=$(HTML_TEMPLATE).appendTo(parent),dd_filetype=new VectorDropdown($(".filedownload .dropdown",container)),but_download=$('button[data-action="download"]',container),opt_license=$('.option[data-type="license"]',container),list_license=$("> ul",opt_license),opt_customize=$('.option[data-type="customize"]',container),list_customize=$("> ul",opt_customize),opt_cloud=$('.option[data-type="cloud"]',container),but_googledrive=$('button[data-type="googledrive"]',opt_cloud),but_dropbox=$('button[data-type="dropbox"]',opt_cloud),cloud_buttons.googledrive=but_googledrive,cloud_buttons.dropbox=but_dropbox,opt_converter=$('.option[data-type="converter"]',container),payment_type=account.credits?VectorOptions.PAYMENT_CREDITS:VectorOptions.PAYMENT_SINGLEIMAGE,account.filetype)for(var filetype in vector.downloads)if(filetype===account.filetype){dd_filetype.select(filetype),updateDownloadButtonLabel(filetype);break}for(var i=0;i<vector.licenses.length;i++)!function(){var license=vector.licenses[i],item_license=$('<li data-type="'+license.type+'" />').appendTo(list_license);if(but_license=$('<button type="button"><span class="title">'+license.type.toTitleCase()+' License</span><span class="sub"></span></button><').appendTo(item_license),sub_license=$(".sub",but_license),license.owned)but_license.prop("disabled",!0),sub_license.html('<span class="status">Purchased</span>');else{var cost_label=payment_type===VectorOptions.PAYMENT_CREDITS?license.cost[VectorOptions.PAYMENT_CREDITS]+'<abbr title="Credits">CR</abbr>':"<small>$</small>"+license.cost[VectorOptions.PAYMENT_SINGLEIMAGE];sub_license.html(cost_label),but_license.on("click",function(){upgradeLicense(license)})}}();if(customizations.length)for($("h6 .label",opt_customize).html("Customize Vector"),$("h6 .label em",opt_customize).remove(),i=customizations.length;i--;)createCustomizationItem(customizations[i]);if(item_new_task=$("<li />").appendTo(list_customize),but_new_task=$('<button type="button"><span class="title">Order Customization</span><span class="sub"><small>$</small>'+COST_CUSTOMIZATION+"</span></button>").appendTo(item_new_task),cloud_options.length)for(i=0;i<cloud_options.length;i++)!function(){var button=cloud_buttons[cloud_options[i].type];button&&(button.data("action",cloud_options[i].status),"saving"===cloud_options[i].status?setTimeout(function(){button.trigger("click")}):cloud_options[i].error&&displaySyncError(cloud_options[i].type,cloud_options[i].error))}();dd_filetype.on("change",updateDownloadButtonLabel),but_download.on("click",downloadVector),but_new_task.on("click",buyCustomization),but_googledrive.on("click",onClickSyncButton),but_dropbox.on("click",onClickSyncButton),$("button",opt_converter).on("click",onClickConverterAction)}(),INSTANCE};$(function(){var IMAGE_MIN_HEIGHT=500,IMAGE_MAX_SIDE=1e3,MAX_FREE_DOWNLOADS=10,asset=$("#vs-asset"),asset_aside=$(".aside",asset),asset_aside_figure=$("figure",asset_aside),asset_form=$("form",asset),asset_image=$(".image",asset),asset_figure=$("figure",asset_image),asset_details=$(".details",asset),asset_options=$(".options",asset_details),but_like=$('button[data-action="like"]',asset_options),but_cart=$('button[data-action="cart"]',asset_options),but_gallery=$('button[data-action="gallery"]',asset_options),related=$("#vs-related"),but_repair=$("#repair-vector"),asset_options_total=asset_options.data("total"),vector={id:parseInt($('input[id="vector_id"]',asset_form).val()),title:$('input[id="vector_title"]',asset_form).val(),description:$('input[id="vector_description"]',asset_form).val(),url:$('input[id="vector_url"]',asset_form).val(),media:$('input[id="vector_media"]',asset_form).val(),ratio:parseFloat($('input[id="vector_ratio"]',asset_form).val()),license_status:$('input[id="vector_license_status"]',asset_form).val(),artist:$('input[id="artist_name"]',asset_form).val()},account={is_artist:"1"==asset_form.data("artist"),is_owner:"1"==asset_form.data("owner"),logged_in:"1"==$('input[id="account_user"]',asset_form).val(),credits:parseInt($('input[id="account_credits"]',asset_form).val())||0,downloads:parseInt($('input[id="account_downloads"]',asset_form).val())||0,filetype:$('input[id="account_filetype"]',asset_form).val()||"zip"};account.downloads=""!=account.downloads&&parseInt(account.downloads);var search_referer=EventTracker.retrieve("vs_search_referer");if(search_referer)try{search_referer=JSON.parse(search_referer)}catch(e){search_referer={keywords:search_referer}}var vector_options=new VectorOptions(asset_form,vector,account);asset_form.data("status")&&createPurchasedOptions();var image_desktop=new VectorImage(asset_figure,vector,account),image_mobile=new VectorImage(asset_aside_figure,vector,account),area_min_height=parseInt($("#nav_sidebar").css("marginTop"))+$("#nav_sidebar").height()+19,image_min_width=$(".meta",asset_details).width()+20+(account.logged_in?251:125);function trackEvent(event_type,event_delay){var event={action:event_type,image:vector.id,search:""};search_referer&&(search_referer.keywords&&(event.search=search_referer.keywords),search_referer.scope!==SearchResults.SCOPE_ALL&&(event.search_scope=search_referer.scope),search_referer.artists&&(event.search_artist=search_referer.artists),search_referer.categories&&(event.search_category=search_referer.categories)),EventTracker.track(EventTrackerLogger.ID_SEARCH,event,event_delay)}function setImageLimits(){var browser_width=window.innerWidth,browser_height=window.innerHeight-112,min_height="",max_width="";800<=browser_width&&(min_height=Math.max(area_min_height,asset_aside.height()+20),max_width=Math.max(IMAGE_MIN_HEIGHT,browser_height)/vector.ratio,max_width=Math.min(1e3/vector.ratio,max_width),max_width=Math.min(IMAGE_MAX_SIDE,max_width),max_width=Math.max(image_min_width,max_width)),asset.css({minHeight:min_height,maxWidth:max_width}),800<browser_width&&asset_options.width()<90*asset_options_total?asset_options.hasClass("mini")||asset_options.addClass("mini"):asset_options.hasClass("mini")&&asset_options.removeClass("mini")}function launchPaymentBox(license,cost_license,payment_type,cost_customization){var pbox,image_settings={id:vector.id,title:vector.title,license:license,cost:cost_license,payment:payment_type};if(cost_customization){var cost_total=payment_type===VectorOptions.PAYMENT_SINGLEIMAGE?cost_license+cost_customization:cost_customization;pbox=new PaymentBox(image_settings,{total_cost:cost_total,filetype:account.filetype},{cost:cost_customization})}else pbox=new PaymentBox(image_settings,{total_cost:cost_license,filetype:account.filetype});pbox.on("purchase",onSingleImagePurchase),pbox.on("view_options",function(){VectorStock.scrollTo($(".download_options"))})}function downloadAttempt(license_type){vector_options.disableButton("Downloading…");var xhr=function(license_type){return $.get("/api/vector/download/"+vector.id).done(function(response){if(1==response.success)VectorStock.track("send","event","Download",license_type.toTitleCase()+" license","#"+vector.id,0),trackEvent("download_success"),VectorStock.goToURL(response.url);else{var message="Image: #"+vector.id+", Message: ";response.message?message+=response.message:message+="No message set: "+JSON.stringify(response),VectorStock.track("send","event","Error (User)","Download",message),trackEvent("download_attempt"),alert("Sorry, download failed - "+(response.message||"Unknown server error, please contact support"))}}).fail(function(jqxhr,text_status,error){var event_details={image:vector.id,license:license_type,status:text_status,error:error};VectorStock.track("send","event","Error (JS)","CustomError: Download API Call Failed",JSON.stringify(event_details)),trackEvent("download_attempt")})}(license_type);return xhr.done(function(response){vector_options.enableButton()}).fail(function(jqxhr,text_status,error){vector_options.enableButton()}),xhr}function purchaseAttempt(license_type,payment_type,credit_cost){vector_options.disableButton("Processing…");var xhr=purchaseServerRequest(license_type,payment_type);return xhr.done(function(response){1==response.success&&(onPurchaseSuccess(license_type,payment_type,credit_cost,response),vector_options.empty(),createPurchasedOptions(response.file_urls,response.license_options)),vector_options.enableButton()}).fail(function(jqxhr,text_status,error){vector_options.enableButton()}),xhr}function purchaseServerRequest(license_type,payment_type){var url_download="/api/"+payment_type+"/purchase/"+vector.id;return payment_type!=VectorOptions.PAYMENT_CREDITS&&payment_type!=VectorOptions.PAYMENT_SUBSCRIPTION||(url_download+=license_type?"/"+license_type:""),$.get(url_download).done(function(response){1!==response.success&&(VectorStock.track("send","event","Error (User)","Download","Image: #"+vector.id+", Message: "+(response.message||"[No message set]")),alert("Sorry, purchase failed - "+(response.message||"Unknown server error, please contact support")))}).fail(function(jqxhr,text_status,error){var event_details={image:vector.id,license:license_type,status:text_status,error:error};VectorStock.track("send","event","Error (JS)","CustomError: Purchase Attempt Failed",JSON.stringify(event_details)),trackEvent("download_attempt")})}function onPurchaseSuccess(license_type,payment_type,credit_cost,response){license_type=license_type||VectorOptions.LICENSE_STANDARD,vector.license_status=license_type,but_cart.trigger("unselect"),asset_options.attr("data-cart","off"),VectorStock.removeFromCart(vector.id),VectorStock.userData.addPurchase(vector.id),$('input[id="vector_license_status"]',asset_form).val(license_type),void 0!==response.downloads&&(VectorStock.setTally("subscription",response.downloads),account.downloads=response.downloads),void 0!==response.credits&&(VectorStock.setTally("credits",response.credits),account.credits=response.credits);var event_action=license_type.toTitleCase()+" license",event_label="#"+vector.id+" ",event_value=credit_cost||1;if(payment_type==VectorOptions.PAYMENT_SUBSCRIPTION?event_label+="(1 sub download)":event_label+="("+credit_cost+" credit"+(1==credit_cost?"":"s")+")",VectorStock.track("send","event","Download",event_action,event_label,event_value),trackEvent("purchase"),trackEvent("download_success"),license_type){var url_download=response.url;"zip"!==account.filetype&&response.file_urls[account.filetype]&&(url_download=response.file_urls[account.filetype]),VectorStock.goToURL(url_download)}}function onSingleImagePurchase(transaction_response,image_license,transaction_cost){image_license=image_license||VectorOptions.LICENSE_STANDARD,vector.license_status=image_license,but_cart.trigger("unselect"),asset_options.attr("data-cart","off"),VectorStock.removeFromCart(vector.id),VectorStock.userData.addPurchase(vector.id),$('input[id="vector_license_status"]',asset_form).val(image_license),vector_options.empty();var event_action=image_license.toTitleCase()+" license",event_label="#"+vector.id+" (Single-Image)",event_value=transaction_cost;VectorStock.track("send","event","Download",event_action,event_label,event_value),trackEvent("purchase"),trackEvent("download_success"),createPurchasedOptions(transaction_response.file_urls,transaction_response.license_options,transaction_response.customization)}function onClickImage(){vector.license_status==vector_options.license?downloadAttempt(vector_options.license):account.logged_in?vector_options.license==VectorOptions.LICENSE_FREE?downloadAttempt(vector_options.license):account.credits||account.downloads||(vector_options.payment==VectorOptions.PAYMENT_SINGLEIMAGE?launchPaymentBox(vector_options.license,vector_options.cost,vector_options.payment,vector_options.customization):VectorStock.goToURL("/purchase?id="+vector.id)):(vector_options.license==VectorOptions.LICENSE_FREE?VectorStock.goToURL("/signup"):vector_options.payment==VectorOptions.PAYMENT_SINGLEIMAGE?launchPaymentBox(vector_options.license,vector_options.cost,vector_options.payment,vector_options.customization):VectorStock.goToURL("/signup"),trackEvent("download_attempt"))}function showAttributionPopup(){function trackAttributionEvent(event_data){EventTracker.track(EventTrackerLogger.ID_LOG,event_data,!0)}function getFreeDownloads(){return window.localStorage&&localStorage.free_downloads?JSON.parse(localStorage.free_downloads):[]}var attr_popup=new VectorAttributionPopup(vector.id,vector.title,vector.url,vector.artist);trackAttributionEvent({source:"Attribution Popup",event:"Open",detail:{vector:vector.id}}),attr_popup.on("select_tab",function(tab_id){trackAttributionEvent({source:"Attribution Popup",event:"Select Tab",detail:{vector:vector.id,tab:tab_id}})}),attr_popup.on("copy_url",function(url){trackAttributionEvent({source:"Attribution Popup",event:"Copy URL",detail:{vector:vector.id,url:url}})}),attr_popup.on("download",function(){var free_downloads=getFreeDownloads();if(function(){var free_downloads=getFreeDownloads();return account.logged_in||0<=free_downloads.indexOf(vector.id)||free_downloads.length<MAX_FREE_DOWNLOADS}()){if(attr_popup.setDownloadStatus(!0),downloadAttempt(VectorOptions.LICENSE_FREE).done(function(response){attr_popup.close()}).fail(function(jqxhr,text_status,error){attr_popup.setDownloadStatus(!1)}),!account.logged_in&&free_downloads.indexOf(vector.id)<0&&(free_downloads.push(vector.id),window.localStorage&&(localStorage.free_downloads=JSON.stringify(free_downloads))),!$(".overlay-attribution",asset_figure).length){var overlay_desktop;(overlay_desktop=new VectorAttributionOverlay(asset_figure,vector.id,vector.title,vector.url,vector.artist)).on("close",function onCloseDesktopOverlay(){overlay_desktop.off("close",onCloseDesktopOverlay),overlay_mobile&&overlay_mobile.close()})}if(!$(".overlay-attribution",asset_aside_figure).length){var overlay_mobile;(overlay_mobile=new VectorAttributionOverlay(asset_aside_figure,vector.id,vector.title,vector.url,vector.artist)).on("close",function onCloseMobileOverlay(){overlay_mobile.off("close",onCloseMobileOverlay),overlay_desktop&&overlay_desktop.close()})}trackAttributionEvent({source:"Attribution Popup",event:"Download",detail:{vector:vector.id,tally:free_downloads.length}}),VectorStock.track("send","event","Download","Free license","#"+vector.id,0)}else{new SignupBox({sidebar:'<h1>VectorStock</h1><div class="sb-features" data-type="signup"><p>You have reached your limit of anonymous free downloads.<p><p>Signup now to get unlimited access!</p></div>'});trackAttributionEvent({source:"Attribution Popup",event:"Limit Reached",detail:{vector:vector.id,tally:free_downloads.length}})}}),attr_popup.on("close",function(){trackAttributionEvent({source:"Attribution Popup",event:"Close",detail:{vector:vector.id}})})}function createPurchasedOptions(download_urls,license_options,customization){if(!license_options){var license_options_text=$('input[id="vector_license_options"]',asset_form).val();license_options=[];license_options_text&&(license_options=JSON.parse(license_options_text))}if(!download_urls){var download_urls_text=$('input[id="vector_download_urls"]',asset_form).val();download_urls=download_urls_text?JSON.parse(download_urls_text):{}}var customizations_text=$('input[id="account_customizations"]',asset_form).val(),customizations=[];customizations_text&&(customizations=JSON.parse(customizations_text)),customization&&customizations.push(customization);var cloud_options_text=$('input[id="account_cloud"]',asset_form).val(),cloud_options=[];cloud_options_text&&(cloud_options=JSON.parse(cloud_options_text));var settings_vector={id:vector.id,title:vector.title,downloads:download_urls,licenses:license_options},settings_account={credits:account.credits,downloads:account.downloads,filetype:account.filetype};new VectorPurchasedOptions(asset_form,settings_vector,settings_account,customizations,cloud_options).on("license_purchase",function(license_type,payment_type,payment_cost,callback){purchaseServerRequest(license_type,payment_type).done(function(response){callback(1==response.success,response),onPurchaseSuccess(license_type,payment_type,payment_cost,response)}).fail(function(jqxhr,text_status,error){callback(!1)})})}VectorStock.syncCartButton=function(){but_cart&&(VectorStock.userData.isInCart(vector.id)?but_cart.trigger("select"):but_cart.trigger("unselect"))},$(window).on("resize focus",setImageLimits),setImageLimits(),image_desktop.on("click",onClickImage),image_desktop.on("download_composite",function(){trackEvent("composite")}),image_mobile.on("click",onClickImage),but_repair.one("click",function(){var button=$(this);button.text("Repairing"),$.post("/api/vector/repair/"+vector.id,function(response){response.success?button.text("Repaired"):button.text("Failed"),button.addClass("repaired")})}),$('button[data-action="follow"]',asset_details).each(function(){var tooltip,button=$(this),label=$(".label",button);button.on("mouseenter",function(){if(!button.hasClass("selected")){var left=button.offset().left+button.outerWidth()/2,top=button.offset().top+button.outerHeight()+5,message=button.attr("title");tooltip=new Tooltip(left,top,message),button.attr("title",""),button.one("mouseleave",function(){tooltip&&tooltip.remove(),button.attr("title",message)})}}),button.on("click",function(){var is_following=button.hasClass("selected"),label_text=is_following?"Follow":"Following";button.toggleClass("selected"),label.text(label_text),tooltip&&tooltip.remove(),is_following?VectorStock.removeFromFollowing(vector.artist):(VectorStock.addToFollowing(vector.artist,function(response){response&&response.success||(button.removeClass("selected"),label.text("Follow")),response&&response.message&&"max_following_reached"==response.message&&alert("Could not follow artist - limit reached"+(response.following?" ("+response.following+")":""))}),trackEvent("follow"))})}),but_like.each(function(){var counter=but_like.data("count")||0,is_liked=but_like.hasClass("selected"),like_tracked=!1,label=$(".tally",but_like);function onActionComplete(response){response.likes_image&&response.likes_image!==counter&&setCounter(response.likes_image),response.likes_account&&VectorStock.setTally("likes",response.likes_account)}function setCounter(new_counter){new_counter=Math.max(0,new_counter),label.text(0==new_counter?"":"("+new_counter+")"),counter=new_counter}but_like.on("select",function(){setCounter(counter+1),but_like.addClass("selected"),VectorStock.likeImage(vector.id,onActionComplete),is_liked=!0}),but_like.on("unselect",function(){setCounter(counter-1),but_like.removeClass("selected"),VectorStock.unlikeImage(vector.id,onActionComplete),is_liked=!1}),but_like.on("click",function(){VectorStock.isLoggedIn()?is_liked?but_like.trigger("unselect"):but_like.trigger("select"):VectorStock.goToURL("/signup"),is_liked&&!like_tracked&&(trackEvent("like"),like_tracked=!0)})}),but_cart.each(function(){var in_cart=but_cart.hasClass("selected");but_cart.on("select",function(){but_cart.addClass("selected"),vector_options.payment&&vector_options.customization&&alert("Please note - Images purchased from your Cart do not include customization options. To get an image with a customization, buy directly from this page instead."),in_cart=!0}),but_cart.on("unselect",function(){but_cart.removeClass("selected"),in_cart=!1}),but_cart.on("click",function(){in_cart?(but_cart.trigger("unselect"),VectorStock.removeFromCart(vector.id)):(but_cart.trigger("select"),VectorStock.addToCart(vector.id,vector_options.license,function(response){response.success||(but_cart.trigger("unselect"),response.message&&"cart_full"==response.message&&alert("Could not add image #"+vector.id+" to Cart - limit reached"+(response.cart_total?" ("+response.cart_total+")":"")))}),trackEvent("cart"))})}),but_gallery.on("click",function(){new GalleryBox(vector.id,vector.title,vector.artist);trackEvent("gallery")}),vector_options.on("change_license",function(license){var but_cart_disabled=!1;vector.license_status!=license&&vector.license_status!=VectorOptions.LICENSE_EXPANDED||(but_cart_disabled=!0),but_cart.prop("disabled",but_cart_disabled)}),vector_options.on("attribution_popup",showAttributionPopup),vector_options.on("download",function(license,payment,cost,customization){account.is_owner||vector.license_status==license||vector.license_status==VectorOptions.LICENSE_EXPANDED?downloadAttempt(license):license==VectorOptions.LICENSE_FREE?(showAttributionPopup(),trackEvent("download_attempt")):payment==VectorOptions.PAYMENT_SINGLEIMAGE?(launchPaymentBox(license,cost,payment,customization),trackEvent("download_attempt")):account.logged_in?payment==VectorOptions.PAYMENT_SUBSCRIPTION?0<account.downloads?customization?launchPaymentBox(license,cost,payment,customization):purchaseAttempt(license,VectorOptions.PAYMENT_SUBSCRIPTION):(trackEvent("download_attempt",!0),VectorStock.goToURL("/purchase/subscription?id="+vector.id)):payment==VectorOptions.PAYMENT_CREDITS&&(account.credits>=cost?customization?launchPaymentBox(license,cost,payment,customization):purchaseAttempt(license,VectorOptions.PAYMENT_CREDITS,cost):(trackEvent("download_attempt",!0),VectorStock.goToURL("/purchase/credits?id="+vector.id+"&license="+license))):(new SignupBox,trackEvent("download_attempt"))}),vector_options.on("download_file",function(url_download,license){VectorStock.goToURL(url_download)}),$(".filetypes li",asset_aside).on("mouseover",function(){var item=$(this),abbr=$("abbr",item),left=item.offset().left+item.outerWidth()/2,top=item.offset().top+item.outerHeight()+3,message=abbr.attr("title"),tooltip=new Tooltip(left,top,message);abbr.attr("title",""),item.one("mouseleave",function(){tooltip.remove(),abbr.attr("title",message)})}),$(".gallery li:not(.more)",related).each(function(){new VectorStock.LazyImage($(this))}),VectorStock.isMobile()||$(".gallery.small li:not(.more)").each(function(){var link=$("a",this),vector_id=$(this).data("id"),vector_title=$(this).data("title");if(vector_id)new PreviewLink(link,vector_id,vector_title)});var vector_upgrade_price=$('input[id="vector_upgrade_price"]');if(vector_upgrade_price.length){var cost=parseFloat(vector_upgrade_price.val());launchPaymentBox(VectorOptions.LICENSE_EXPANDED,cost,vector_options.payment)}$("#vector-stats").each(function(){var box=$(this);$("table thead th",box).on("click",function(){box.toggleClass("minimised")})}),trackEvent("view")});